import { createRouter } from "./context";
import { z } from "zod";
import { TRPCError } from "@trpc/server";

export const create{{ pascalCase name create }}Schema = z.object({
  {{ fieldsToZod fields=fields method="create" }}
})

export const update{{ pascalCase name update }}Schema = z.object({
  {{ fieldsToZod fields=fields method="update" }}
})

export const get{{ pascalCase name get }}Schema = z.object({
  {{ fieldsToZod fields=fields method="get" }}
})

export const delete{{ pascalCase name delete}}Schema = z.object({
  {{ fieldsToZod fields=fields method="delete" }}
})

export const {{ lowerCase name }}Router = createRouter()
  .query("list-{{ plural (lowerCase name) }}", {
    async resolve({ ctx, input }) {

    },
  }).query("get-{{ lowerCase name }}", {
    input: get{{ pascalCase name }}Schema,
    async resolve({ ctx, input }) {

    },
  })
  .middleware(async ({ ctx, next }) => {
    if (!ctx.session?.user) {
      throw new TRPCError({
        code: "UNAUTHORIZED",
      });
    }

    return next();
  })
  .mutation("create-{{ lowerCase name }}", {
    input: z.object({

    }),
    async resolve({ ctx, input }) {
      const {  } = input;

      const user = ctx.session?.user;

      try {
      
      } catch (e) {
    
        throw new TRPCError({
          code: "BAD_REQUEST",
        });
      }
    },
  }).mutation("update-{{ lowerCase name }}", {
    input: update{{ pascalCase name }}Schema,
    async resolve({ ctx, input }) {
      const {  } = input;

      const user = ctx.session?.user;

      try {
      
      } catch (e) {
    
        throw new TRPCError({
          code: "BAD_REQUEST",
        });
      }
    },
  }).mutation("delete-{{ lowerCase name }}", {
    input: delete{{ pascalCase name }}Schema,
    async resolve({ ctx, input }) {
      const {  } = input;

      const user = ctx.session?.user;

      try {
      
      } catch (e) {
    
        throw new TRPCError({
          code: "BAD_REQUEST",
        });
      }
    },
  })
